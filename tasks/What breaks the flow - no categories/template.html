<script type='text/javascript'
        src='https://s3.amazonaws.com/mturk-public/externalHIT_v1.js'></script>
<meta http-equiv='Content-Type' content='text/html; charset=UTF-8'/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<link href="https://s3.amazonaws.com/mturk-public/bs30/css/bootstrap.min.css" rel="stylesheet"/>

<style>
    body {
        font-family: 'Helvetica', 'Arial', sans-serif;
        color: #444444;
        font-size: 12pt;
        background-color: #FAFAFA;
    }

    mark {
        background-color: #cafad5;
        color: black;
        padding-left: 3px;
        padding-right: 3px;

    }

    ul {
        text-align: left;
        list-style-position: inside;
    }

    textarea {
        font-size: 18px;
        margin: 0 auto;
        display: block;
    }

    #submitButton {
        font-size: 20pt;
        color: white;
        background-color: green;
        border: 2px solid #336600;
        padding: 3px;
    }

    table {
        border-spacing: 5px;
    }

    .Yes {
        padding-left: 3px;
        padding-right: 3px;
        font-weight: bold;
        /*color: white;
        background-color: #3333ff;*/
    }

    .No {
        padding-left: 3px;
        padding-right: 3px;
        font-weight: bold;
        /*color: white;
        background-color: #ff3333;*/
    }

    .coherent{
        padding-left: 3px;
        padding-right: 3px;
        font-weight: bold;
        /* background-color: #ccd9ff; */
    }

    .sent_begin {
        padding-left: 3px;
        padding-right: 3px;
        font-weight: bold;
        /* background-color: #ccffff; */
    }

    .sent_middle {
        padding-left: 3px;
        padding-right: 3px;
        font-weight: bold;
        /* background-color: #d9ffcc; */
    }

    .sent_end {
        padding-left: 3px;
        padding-right: 3px;
        font-weight: bold;
        /* background-color: #fff2cc; */
    }

    .sent_rule {
        padding-left: 3px;
        padding-right: 3px;
        font-weight: bold;
        /*background-color: #ffcccc; */
    }

    .column_header1 {
        padding-left: 3px;
        padding-right: 3px;
        background-color: #b0fac6;
    }

    .column_header2 {
        padding-left: 3px;
        padding-right: 3px;
        background-color: #fad896;
    }

    .bb {
        border-bottom: 2px dotted black;
    }


    /* On mouse-over, add a grey background color */
    .container:hover input ~ .checkmark {
        background-color: #ccc;
    }

    /* When the radio button is checked, add a blue background */
    .container input:checked ~ .checkmark {
        background-color: #2196F3;
    }

    /* Create the indicator (the dot/circle - hidden when not checked) */
    .checkmark:after {
        content: "";
        position: absolute;
        display: none;
    }

    /* Show the indicator (dot/circle) when checked */
    .container input:checked ~ .checkmark:after {
        display: block;
    }

    /* Style the indicator (dot/circle) */
    .container .checkmark:after {
        top: 9px;
        left: 9px;
        width: 8px;
        height: 8px;
        border-radius: 50%;
        background: white;
    }

    .tt {
    border-bottom: 1px dotted #000;
    text-decoration: none;
    color: purple;
    font-weight: bold;
    }

    .hoverTable{
        width:100%;
        border-collapse:collapse;
    }
    .hoverTable td{
        padding:5px; border:#4e95f4 0.2px solid;
    }
    /* Define the default color for all the table rows */
    .hoverTable tr{
        background: #ffffff;
    }
    /* Define the hover highlight color for the table row */
    .hoverTable tr:hover {
          background-color: #ffff99;
    }
    input[type='radio'] {
        -webkit-appearance:none;
        width:30px;
        height:30px;
        background:white;
        border-radius:5px;
        border:2px solid #555;
    }
    input[type='radio']:checked {
        background: #00bfff;
    }


    input[type='checkbox'] {
        -webkit-appearance:none;
        width:30px;
        height:30px;
        background:white;
        border-radius:5px;
        border:2px solid #555;
    }
    input[type='checkbox']:checked {
        background: #00bfff;
    }

    textarea { resize: none; }
</style>


<script type="text/javascript">
    function init() {
        // fixed terms/phrases for fixed place holders
        var sent_begin  = "Beginning";
        var sent_middle = "Middle";
        var sent_end    = "Ending";
        var question1 = "Which pair of sentences has an implausible flow?";
        var question2 = "The implausible link violates what should have happened based on my knowledge about:";


        var nameElements = document.getElementsByTagName("span");
        for (var i = 0; i < nameElements.length; i++) {
            if (nameElements[i].className == "sent_begin") {
                nameElements[i].innerText = sent_begin;
            }

            else if (nameElements[i].className == "sent_middle") {
                nameElements[i].innerText = sent_middle;
            }
            else if (nameElements[i].className == "sent_end") {
                nameElements[i].innerText = sent_end;
            }
            else if (nameElements[i].className == "sent_rule") {
                nameElements[i].innerText = sent_rule;
            }
            else if (nameElements[i].className == "question1") {
                nameElements[i].innerHTML = question1;
            }
            else if (nameElements[i].className == "question2") {
                nameElements[i].innerHTML = question2;
            }
        }
        document.getElementById("introduction").style.display = "none";

        if (document.getElementById("AnswerRightEnding").value == "1") {
            document.getElementById("incorrect_middle").innerHTML = document.getElementById("RandomMiddleSentenceQuiz2").value
        }
        else {
            document.getElementById("incorrect_middle").innerHTML = document.getElementById("RandomMiddleSentenceQuiz1").value
        }

    }

    //function isValid(){
    //    // write down
    //}

    function toggle() {
        if ((document.getElementById("introduction").style.display) == "block") {
            document.getElementById("introduction").style.display = "none";
        }
        else {
            document.getElementById("introduction").style.display = "block";
        }
    }

    // read when document is ready (like a "main" function)
    $(document).ready(function () {
        console.log("**** run ready function");
        init();
    });

    function disable_field(f) {
        document.getElementById(f).disabled = true;
    }

    function enable_field(f) {
        document.getElementById(f).disabled = false;
    }

    function disable_q() {

        disable_field("social_cs1");
        disable_field("social_cs0");

        disable_field("phys_cs1");
        disable_field("phys_cs0");

        disable_field("psych_cs1");
        disable_field("psych_cs0");

        disable_field("temporal1");
        disable_field("temporal0");

        disable_field("location1");
        disable_field("location0");

        disable_field("other1");
        disable_field("other0");

        disable_field("number1");
        disable_field("number0");


    }

    function enable_q() {
        enable_field("social_cs1");
        enable_field("social_cs0");

        enable_field("phys_cs1");
        enable_field("phys_cs0");

        enable_field("psych_cs1");
        enable_field("psych_cs0");

        enable_field("temporal1");
        enable_field("temporal0");

        enable_field("location1");
        enable_field("location0");

        enable_field("other1");
        enable_field("other0");

        enable_field("number1");
        enable_field("number0");

    }

</script>

<form name='mturk_form' method='post' id='mturk_form' action='/mturk/externalSubmit' onsubmit="return isValid()">
    <input type='hidden' value='' name='assignmentId' id='assignmentId'/>
    <div class="container">
        <h1 align="center">What breaks the flow ?</h1>

        <h3 align="center">Welcome and thank you for your participation.</h3>
        <h2 align="left"><u>Instructions and Examples</u><a href="javascript:toggle();" id="displaytext" style="font-size: 70%; color: red";> (<b>Expand / Collapse</b>)</a></h2>
        <div id="introduction" style="width:1000px; margin:0 auto;">
            <p>In this HIT, you will be shown a short story. We know that the story is implausible. Your task is to indicate the pair of sentences which has an implausible flow.</p>
            Each story has three sentences (Beginning, Middle and Ending). Indicate if the flow from the Beginning-to-Middle sentence is broken, or the flow from the Middle-to-Ending sentence is broken.


            <p>Here are some Examples</p>

            <h2 align="left"><u>Examples</u></h2>
            <h3>1</h3>
            <h4>Part 1: Select which link is broken ?</h4>
            <div id="examples" class="examples" style="width:1024px; margin:0 auto; display:block;">
            <table class="table table-bordered">
                <!--Table head-->
                <thead>
                <tr>
                    <th align="center" width="33%">Beginning</th>
                    <th></th>
                    <th align="center" width="33%">Middle</th>
                    <th></th>
                    <th align="center" width="33%">Ending</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <!-- beggining -->
                    <td style="vertical-align:middle;">Rob wanted a Sega Genesis.</td>
                    <td align="center"><span style="font-size:48px;">⟶</span><br/><input type="checkbox" name="example1" value="me" id="e11" checked disabled ></td>

                    <!-- middle -->
                    <td style="vertical-align:middle;">Rob sold one to Dan for $20</td>

                    <td align="center"><span style="font-size:48px;">⟶</span><br/><input type="checkbox" name="example1" value="me" id="e12" disabled></td>


                    <!-- ending -->
                    <td style="vertical-align:middle;">Dan hated to see Rob sad so he paid the $20.</td>
                </tr>
                <tr>
                    <td colspan="5"><span style="color: purple; font-weight: bold">Explanation</span>: Beginning of the story says "Rob wanted a Sega Genesis" which means he doesn't have one. This means he cannot sell one to Dan. Therefore, the flow is broken between the <strong>Beginning and Middle</strong>.</td>
                </tr>
                </tbody>
            </table>



            <hr/>

            <h3>2</h3>

            <h4>Part 1: Select which link is broken ?</h4>

            <table class="table table-bordered">
                <!--Table head-->
                <thead>
                <tr>
                    <th align="center" width="33%">Beginning</th>
                    <th></th>
                    <th align="center" width="33%">Middle</th>
                    <th></th>
                    <th align="center" width="33%">Ending</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <!-- beggining -->
                    <td style="vertical-align:middle;">Amy got a flat tire one morning.</td>
                    <td align="center"><span style="font-size:48px;">⟶</span><br/><input type="checkbox" name="example1" value="me" id="e11"  disabled></td>

                    <!-- middle -->
                    <td style="vertical-align:middle;">No one stopped to help Amy get the spare on.</td>

                    <td align="center"><span style="font-size:48px;">⟶</span><br/><input type="checkbox" name="example1" value="me" id="e12" disabled checked="checked"></td>


                    <!-- ending -->
                    <td style="vertical-align:middle;">Amy thanked him and got back in her car.</td>
                </tr>
                <tr>
                    <td colspan="5"><span style="color: purple; font-weight: bold">Explanation</span>: Middle of the story says that nobody stopped to help Amy. Which means that there is nobody she has to thank for her. Thus, the flow is broken between the <strong>Middle and Ending</strong></td>
                </tr>
                </tbody>
            </table>
            <br/>



                <hr/>
                Great! You are now ready to start the following questions!
            </div>
        </div>
        <br/>
        <h2 align="center" style="color: red">This is a new task. <br/>Please read instructions again if you have not seen this symbol before:
            <span style="color: black; font-size: 50px">&#9823</span></h2>
        <h2 align="left"><u>Your Task</u></h2>
        <div style="width:1024px; margin:0 auto;" >

            <div>
                <strong>Part 1:</strong> <span class="question1"></span><br/><br/>

                <span style="color: purple"><i>If the story is plausible, select "The story is plausible"</i></span>

                <table class="table table-bordered">
                    <!--Table head-->
                    <thead>
                    <tr>
                        <th align="center" width="33%">Beginning</th>
                        <th></th>
                        <th align="center" width="33%">Middle</th>
                        <th></th>
                        <th align="center" width="33%">Ending</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <!-- beggining -->
                        <td style="vertical-align:middle;">${InputSentence1}</td>
                        <td align="center"><span style="font-size:48px;">⟶</span><br/><input type="radio" name="culprit" value="bm" id="culprit1" required onchange="enable_q()"></td>

                        <!-- middle -->
                        <td style="vertical-align:middle;" id="incorrect_middle"></td>

                        <td align="center"><span style="font-size:48px;">⟶</span><br/><input type="radio" name="culprit" value="me" id="culprit2" onchange="enable_q()"></td>


                        <!-- ending -->
                        <td style="vertical-align:middle;">${InputSentence5}</td>
                    </tr>
                    <tr>
                        <td colspan="5" align="center"><label for="culprit3" style="color: purple; font-weight: bold">The story is plausible:</label><br/><input type="radio" name="culprit" value="none" id="culprit3" onchange="disable_q()"></td></td>
                    </tr>
                    </tbody>
                </table>




            <br/><br/>
            <hr/>

            <p><span>Comments and feedback (This is optional. Please leave a comment if you have any questions, find issues, etc.)</span>
            </p>
            <span><textarea class="form-control" cols="120" name="Comments" rows="5"></textarea></span>
            <br/>
            <input type="hidden" id="InputStoryid" name="InputStoryid" value="${InputStoryid}">
            <input type="hidden" id="AnswerRightEnding" name="AnswerRightEnding" value="${AnswerRightEnding}">
            <input type="hidden" id="RandomMiddleSentenceQuiz1" name="RandomMiddleSentenceQuiz1" value="${RandomMiddleSentenceQuiz1}">
            <input type="hidden" id="RandomMiddleSentenceQuiz2" name="RandomMiddleSentenceQuiz2" value="${RandomMiddleSentenceQuiz2}">

            <p align="center">
                <input type='submit' id='submitButton' value='Submit'/>
            </p>

        </div>

    </div>

    <hr/>

</form>
<script language='Javascript'>turkSetAssignmentID();</script>

